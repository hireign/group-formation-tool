<!DOCTYPE html>
<html	xmlns="http://www.w3.org/1999/xhtml"
         xmlns:th="https://www.thymeleaf.org"
         xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
>
    <head>
        <title>CSCI5308 - Group Formation Tool</title>
        <!-- Normalize.css by Nicolas Gallagher, used from https://necolas.github.io/normalize.css/
    Necessary to reset some default browser styles for consistent appearance across browsers. -->
        <link th:href="@{/styles/cssandjs/normalize.css}" rel="stylesheet" />
        <!-- This file includes all default styles for this application. -->
        <link th:href="@{/styles/cssandjs/main.css}" rel="stylesheet" />
    </head>
    <body class="bodyGridContainer">
        <header class="bodyGridRow headerGridContainer">
            <h1>CSCI5308 Group Formation Tool</h1>
        </header>
    <!-- I got the idea for how to do this from https://www.thymeleaf.org/doc/articles/springsecurity.html -->
        <div class="bodyGridRow userProfileGridContainer" sec:authorize="isAuthenticated()">
            <h4 class="userProfileGridCol1" th:inline="text">BannerID: [[${#httpServletRequest.remoteUser}]]</h4>
            <form class="userProfileGridCol4" th:action="@{/logout}" method="post">
                <input type="submit" value="Sign Out"/>
            </form>
        </div>
        <main class="bodyGridRow mainGridContainer">
            <aside class="mainGridRow welcomeInfoBox">
              <h2>Question Directory</h2>
            </aside>
        <div class="mainGridRow">
            <form>
                <select id="sort" name="sort" onchange="sortQuestions(this.value)">
                    <option selected="selected" disabled="disabled" value="">-- Sort By --</option>
                    <option value ="TITLE">Title</option>
                    <option value ="DATE">Date Created</option>
                </select>
            </form>
            <table class="showQuestions" th:each="question, counter : ${questions}">
                <tr>
                    <td><a th:text="${counter.index+1}">error fetching index</a></td>
                    <td>Title: </td>
                    <td><a th:text="${question.getTitle()}">error fetching title</a></td>
                    <td><input type="submit" value="Delete"/></td>
                </tr>
                <tr>
                    <td></td>
                    <td>Text: </td>
                    <td><a th:text="${question.getText()}">error fetching text</a></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td>Date Created: </td>
                    <td><a th:text="${question.getDate()}">error fetching date</a></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td>Question Type: </td>
                    <td><a th:text="${question.getType()}">error fetching type</a></td>
                    <td></td>
                </tr>
                <tr>
                    <td></td>
                    <td>Options: </td>
                    <td>
                        <table>
                            <tr>
                                <th>Value</th>
                                <th>Text</th>
                            </tr>
                            <tr th:each="optionDetail : ${question.getOptions()}">
                                <td th:text="${optionDetail.getValue()}">error</td>
                                <td th:text="${optionDetail.getText()}">error</td>
                            </tr>
                        </table>
                    </td>
                    <td></td>
                </tr>
            </table>
        </div>
        </main>
        <footer class="bodyGridRow footerGridContainer">
            <p><strong>CSCI5308 (Advanced Topics in Software Development)</strong> is a graduate course offered for students enrolled in the <a href="https://www.dal.ca/macs" target="_blank">Master of Applied Computer Science (MACS)</a> at the <a href="https://www.dal.ca/cs" target="_blank">Faculty of Computer Science</a>, <a href="https://www.dal.ca" target="_blank">Dalhousie University</a>.</p>
        </footer>
    </body>
</html>